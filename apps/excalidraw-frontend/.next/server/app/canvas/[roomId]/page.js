(()=>{var e={};e.id=164,e.ids=[164],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},6226:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},6394:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c});var r=s(94),a=s(6178),n=s(7480),i=s.n(n),o=s(2744),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let c=["",{children:["canvas",{children:["[roomId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,9224)),"D:\\projects\\excalidraw\\apps\\excalidraw-frontend\\app\\canvas\\[roomId]\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,3705))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,1920)),"D:\\projects\\excalidraw\\apps\\excalidraw-frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5018,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,3705))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["D:\\projects\\excalidraw\\apps\\excalidraw-frontend\\app\\canvas\\[roomId]\\page.tsx"],u="/canvas/[roomId]/page",p={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/canvas/[roomId]/page",pathname:"/canvas/[roomId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2644:(e,t,s)=>{Promise.resolve().then(s.bind(s,7367))},7618:(e,t,s)=>{Promise.resolve().then(s.bind(s,1918)),Promise.resolve().then(s.bind(s,8651))},4223:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,5538,23)),Promise.resolve().then(s.t.bind(s,1837,23)),Promise.resolve().then(s.t.bind(s,608,23)),Promise.resolve().then(s.t.bind(s,5215,23)),Promise.resolve().then(s.t.bind(s,4891,23)),Promise.resolve().then(s.t.bind(s,7028,23))},7367:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(8769),a=s(729),n=s(8548),i=s(6345);async function o(e,t,s,r,a="#FFFFFF",n){let{shapes:i}=await c(s),o=e.getContext("2d");if(!o)return()=>{};let d=!1,u=0,p=0,x=0,h=0;r.onmessage=t=>{let{type:s,ShapeType:r,color:a,...c}=JSON.parse(t.data);"shape"===s&&(i.push({type:r,color:a,...c}),l(i,e,o,n))},l(i,e,o,n);let f=!1,m=0,g=0,v=[],y=e=>({x:(e.offsetX-n.offsetX)/n.scale,y:(e.offsetY-n.offsetY)/n.scale}),w=c=>{if("pan"===t){d=!0,u=c.offsetX,p=c.offsetY,x=n.offsetX,h=n.offsetY,l(i,e,o,n);return}f=!0;let w=y(c);if(m=w.x,g=w.y,"pencil"===t)v=[{x:m,y:g}];else if("text"===t){let t=prompt("Enter text:");t&&(i.push({type:"text",x:m,y:g,text:t,color:a}),r.send(JSON.stringify({type:"shape",shapeType:"text",x:m,y:g,text:t,roomId:s,color:a})),l(i,e,o,n))}},b=s=>{if("pan"===t){if(!d)return;let t=s.offsetX-u,r=s.offsetY-p;n.offsetX=x+t,n.offsetY=h+r,o.setTransform(n.scale,0,0,n.scale,n.offsetX,n.offsetY),l(i,e,o,n);return}if(!f)return;l(i,e,o,n),o.strokeStyle=a;let r=y(s);if("rectangle"===t){let e=r.x-m,t=r.y-g;o.strokeRect(m,g,e,t)}else if("pencil"===t)v.push({x:r.x,y:r.y}),o.beginPath(),v.forEach((e,t)=>{0===t?o.moveTo(e.x,e.y):o.lineTo(e.x,e.y)}),o.stroke();else if("circle"===t){let e=Math.hypot(r.x-m,r.y-g);o.beginPath(),o.arc(m,g,e,0,2*Math.PI),o.stroke()}},j=c=>{if("pan"===t){d=!1,l(i,e,o,n);return}if(!f)return;f=!1;let u=y(c);if("rectangle"===t){let e=u.x-m,t=u.y-g;i.push({type:"rectangle",x:m,y:g,width:e,height:t,color:a}),r.send(JSON.stringify({type:"shape",shapeType:"rectangle",x:m,y:g,width:e,height:t,roomId:s,color:a}))}else if("pencil"===t)i.push({type:"pencil",points:[...v],color:a}),r.send(JSON.stringify({type:"shape",shapeType:"pencil",points:v,color:a,roomId:s})),v=[];else if("circle"===t){let e=Math.hypot(u.x-m,u.y-g);i.push({type:"circle",x:m,y:g,radius:e,color:a}),r.send(JSON.stringify({type:"shape",shapeType:"circle",x:m,y:g,radius:e,roomId:s,color:a}))}l(i,e,o,n)},k=t=>{t.preventDefault();let s=t.offsetX,r=t.offsetY,a=n.scale,c=a;c=t.deltaY<0?a+.1:Math.max(.1,a-.1);let d=(s-n.offsetX)/a,u=(r-n.offsetY)/a;n.offsetX=s-c*d,n.offsetY=r-c*u,n.scale=c,o.setTransform(n.scale,0,0,n.scale,n.offsetX,n.offsetY),l(i,e,o,n)};return e.addEventListener("mousedown",w),e.addEventListener("mousemove",b),e.addEventListener("mouseup",j),e.addEventListener("wheel",k),()=>{e.removeEventListener("mousedown",w),e.removeEventListener("mousemove",b),e.removeEventListener("mouseup",j),e.removeEventListener("wheel",k),r.onmessage=null}}function l(e,t,s,r){s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,t.width,t.height),s.fillStyle="rgba(0, 0, 0)",s.fillRect(0,0,t.width,t.height),s.setTransform(r.scale,0,0,r.scale,r.offsetX,r.offsetY),e.forEach(e=>{s.strokeStyle=e.color||"#FFFFFF",s.fillStyle=e.color||"#FFFFFF","rectangle"===e.type?s.strokeRect(e.x,e.y,e.width,e.height):"pencil"===e.type?(s.beginPath(),e.points.forEach((e,t)=>{0===t?s.moveTo(e.x,e.y):s.lineTo(e.x,e.y)}),s.stroke()):"text"===e.type?(s.font="16px Arial",s.fillText(e.text,e.x,e.y)):"circle"===e.type&&(s.beginPath(),s.arc(e.x,e.y,e.radius,0,2*Math.PI),s.stroke())})}async function c(e){return console.log(`${a.J}/${e}`),(await i.Z.get(`${a.J}/api/v1/get-shapes/${e}`)).data}var d=s(3273);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,d.Z)("RectangleHorizontal",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]]),p=(0,d.Z)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),x=(0,d.Z)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),h=(0,d.Z)("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]),f=({socket:e,roomId:t})=>{let s=(0,n.useRef)(null),[a,i]=(0,n.useState)(""),[l,c]=(0,n.useState)("#FFFFFF"),[d,f]=(0,n.useState)(100),m=(0,n.useRef)({scale:1,offsetX:0,offsetY:0}),[g,v]=(0,n.useState)({width:window.innerWidth,height:window.innerHeight});return(0,n.useEffect)(()=>{function e(){v({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),(0,n.useEffect)(()=>{let r,n=!1;return s.current&&e&&o(s.current,a,t,e,l,m.current).then(e=>{n||(r=e)}).catch(e=>console.error(e)),()=>{n=!0,r&&r()}},[s,a,l,e,t]),(0,r.jsxs)("div",{className:"flex flex-col  h-screen pt-16",children:[(0,r.jsxs)("div",{className:"bg-[#232329] flex justify-center gap-2 py-2 z-10 sticky top-16",children:[r.jsx("button",{onClick:()=>i("rectangle"),className:`px-4 py-2 text-white bg rounded ${"rectangle"===a?"bg-black":""}`,children:r.jsx(u,{})}),r.jsx("button",{onClick:()=>i("circle"),className:`px-4 py-2 text-white rounded ${"circle"==a?"bg-black":""}`,children:r.jsx(p,{})}),r.jsx("button",{onClick:()=>i("pencil"),className:`px-4 py-2 text-white rounded ${"pencil"==a?"bg-black":""}`,children:r.jsx(x,{})}),r.jsx("button",{onClick:()=>i("pan"),className:`px-4 py-2 text-white rounded ${"pan"==a?"bg-black":""}`,children:r.jsx(h,{})}),(0,r.jsxs)("div",{className:"mt-[7px]",children:[r.jsx("label",{htmlFor:"colorPicker",className:"mr-2 text-white rounded"}),r.jsx("input",{type:"color",id:"colorPicker",value:l,onChange:e=>c(e.target.value),className:"p-1 border rounded"})]})]}),r.jsx("canvas",{className:"bg-black absolute",ref:s,width:g.width+1,height:g.height-64}),r.jsx("div",{className:"relative text-white"})]})},m=(0,s(3911).g)(({roomId:e})=>{let[t,s]=(0,n.useState)(null),[i,o]=(0,n.useState)(!0);return((0,n.useEffect)(()=>{let t=localStorage.getItem("shapeSmithToken"),r=new WebSocket(`${a.M}?token=${t}`);r.onopen=t=>{console.log("connected to ws"),s(r),o(!0),r?.send(JSON.stringify({type:"join_room",roomId:e}))},r.onclose=e=>{console.log("dis-connected from ws"),s(null),o(!1)}},[]),i&&!t)?r.jsx("div",{}):r.jsx(f,{socket:t,roomId:e})})},1918:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var r=s(8769),a=s(8548),n=s(6666),i=s(1599),o=s(184),l=s(2383),c=s(6837),d=s(8651),u=s(6937);let p=()=>{let[e,t]=(0,a.useState)(!1),[s,p]=(0,a.useState)(!1),x=(0,a.useContext)(d.AuthContext);if(!x)return null;let{login:h,handleLogOut:f}=x,m=(0,u.useRouter)();return(0,a.useEffect)(()=>{localStorage.getItem("shapeSmithToken");let e=()=>{t(window.scrollY>10)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[h]),(0,r.jsxs)("nav",{className:`fixed w-full top-0 left-0 right-0 z-50 py-4 px-6 md:px-10 transition-all duration-300 ${e?"bg-white/80 backdrop-blur-lg shadow-sm":"bg-transparent"}`,children:[(0,r.jsxs)("div",{className:"max-w-full mx-auto flex items-center justify-between",children:[(0,r.jsxs)(n.default,{href:"/",className:"flex items-center space-x-2",children:[(0,r.jsxs)("div",{className:"w-8 h-8 relative",children:[r.jsx("div",{className:"absolute inset-0 bg-blue-500 rounded-md rotate-45 transform -translate-x-1 translate-y-1"}),r.jsx("div",{className:"absolute inset-0 bg-purple-500 rounded-md"})]}),r.jsx("span",{className:"text-xl font-semibold tracking-tight",children:"Shapesmith"})]}),(0,r.jsxs)("div",{className:"hidden md:flex items-center space-x-8",children:[!h&&(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx(n.default,{href:"/signin",children:r.jsx(i.z,{variant:"ghost",size:"sm",className:"px-4",children:"Sign In"})}),r.jsx(n.default,{href:"/signup",children:r.jsx(i.z,{size:"sm",className:"px-4",children:"Sign Up"})})]}),h&&r.jsx("div",{className:"flex items-center space-x-4",children:(0,r.jsxs)(i.z,{size:"sm",className:"px-4",onClick:()=>{f(),m.push("/")},children:[r.jsx(o.Z,{className:"h-5 w-5 mr-1"}),"Logout"]})})]}),r.jsx("div",{className:"md:hidden",children:r.jsx(i.z,{variant:"ghost",size:"icon",onClick:()=>p(!s),"aria-label":"Toggle menu",children:s?r.jsx(l.Z,{className:"h-5 w-5"}):r.jsx(c.Z,{className:"h-5 w-5"})})})]}),s&&r.jsx("div",{className:"md:hidden absolute top-full left-0 right-0 bg-white/95 backdrop-blur-lg border-b border-gray-200 shadow-sm p-6 animate-fade-in",children:(0,r.jsxs)("div",{className:"flex flex-col space-y-5",children:[r.jsx(n.default,{href:"/",className:"text-base font-medium transition-colors hover:text-primary",onClick:()=>p(!1),children:"Home"}),!h&&(0,r.jsxs)("div",{className:"pt-2 flex flex-col space-y-3",children:[r.jsx(n.default,{href:"/signin",onClick:()=>p(!1),children:r.jsx(i.z,{variant:"outline",className:"w-full",children:"Sign In"})}),r.jsx(n.default,{href:"/signup",onClick:()=>p(!1),children:r.jsx(i.z,{className:"w-full",children:"Sign Up"})})]}),h&&r.jsx("div",{className:"pt-2 flex flex-col space-y-3",children:(0,r.jsxs)(i.z,{className:"w-full ",onClick:f,children:[r.jsx(o.Z,{className:"h-5 w-5 mr-1"}),"Logout"]})})]})})]})}},1599:(e,t,s)=>{"use strict";s.d(t,{z:()=>c});var r=s(8769),a=s(8548),n=s(3834),i=s(6716),o=s(2720);let l=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef(({className:e,variant:t,size:s,asChild:a=!1,...i},c)=>{let d=a?n.g7:"button";return r.jsx(d,{className:(0,o.cn)(l({variant:t,size:s,className:e})),ref:c,...i})});c.displayName="Button"},729:(e,t,s)=>{"use strict";s.d(t,{J:()=>r,M:()=>a});let r="http://localhost:3003",a="http://localhost:8080"},8651:(e,t,s)=>{"use strict";s.r(t),s.d(t,{AuthContext:()=>i,AuthProvider:()=>o});var r=s(8769),a=s(8548),n=s(6937);let i=(0,a.createContext)(void 0),o=({children:e})=>{let[t,s]=(0,a.useState)(!1),[o,l]=(0,a.useState)(!0),c=(0,n.useRouter)();return(0,a.useEffect)(()=>{localStorage.getItem("shapeSmithToken")&&s(!0),l(!1)},[]),r.jsx(i.Provider,{value:{login:t,setLogin:s,handleLogOut:()=>{localStorage.removeItem("shapeSmithToken"),s(!1),c.push("/")},isCheckingAuth:o},children:e})}},3911:(e,t,s)=>{"use strict";s.d(t,{g:()=>l});var r=s(8769),a=s(8548),n=s(6937),i=s(8651);let o=()=>r.jsx("div",{className:"flex mt-16 h-screen w-full items-center justify-center bg-[#1a1a1a]",children:r.jsx("div",{className:"absolute  text-xl font-semibold text-gray-300 animate-pulse",children:"Connecting to Shapesmith..."})}),l=e=>t=>{let s=(0,a.useContext)(i.AuthContext);if(!s)return null;let{login:l,isCheckingAuth:c}=s,d=(0,n.useRouter)();return((0,a.useEffect)(()=>{c||l||d.push("/signin")},[l,c,d]),c)?r.jsx(o,{}):l?r.jsx(e,{...t}):null}},2720:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var r=s(6744),a=s(5727);function n(...e){return(0,a.m6)((0,r.W)(e))}},9224:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(6593);let a=(0,s(9257).createProxy)(String.raw`D:\projects\excalidraw\apps\excalidraw-frontend\app\canvas\[roomId]\components\CanvasClient.tsx`),{__esModule:n,$$typeof:i}=a,o=a.default;function l({params:e}){let t=e.roomId;return r.jsx(o,{roomId:t})}},1920:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m,metadata:()=>f});var r=s(6593),a=s(6190),n=s.n(a);s(5610);var i=s(9257);let o=(0,i.createProxy)(String.raw`D:\projects\excalidraw\apps\excalidraw-frontend\app\components\Navbar.tsx`),{__esModule:l,$$typeof:c}=o,d=o.default,u=(0,i.createProxy)(String.raw`D:\projects\excalidraw\apps\excalidraw-frontend\app\context\AuthContext.tsx`),{__esModule:p,$$typeof:x}=u;u.default,(0,i.createProxy)(String.raw`D:\projects\excalidraw\apps\excalidraw-frontend\app\context\AuthContext.tsx#AuthContext`);let h=(0,i.createProxy)(String.raw`D:\projects\excalidraw\apps\excalidraw-frontend\app\context\AuthContext.tsx#AuthProvider`),f={title:"Shape Smith",description:"An Excalidraw Clone"};function m({children:e}){return r.jsx("html",{lang:"en",children:r.jsx(h,{children:(0,r.jsxs)("body",{className:`${n().className} overflow-x-hidden`,children:[r.jsx(d,{}),r.jsx("main",{className:"min-h-screen flex flex-col",children:e})]})})})}},3705:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(572);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},5610:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[707,641,572,345],()=>s(6394));module.exports=r})();